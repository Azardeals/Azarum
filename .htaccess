Satisfy Any

Options -Multiviews

RewriteEngine On 
RewriteBase /
ErrorDocument 404 /404
Redirect 404 /digital-uploads
RewriteRule ^(index\.php|home\.php)$ / [R=301,L]
# RewriteRule ^faq/([0-9]+) faq.php?cat=$1
RewriteRule ^faq/([a-zA-Z0-9_-]+)$ faq.php?cat=$1
RewriteRule ^login/([a-zA-Z0-9_-]+)$ login.php?type=$1
RewriteRule ^job-apply/([0-9]+) job-apply.php?jobs_id=$1
RewriteRule ^([a-zA-Z0-9_-]+)/(deal|more-cities|city-deals|instant-deal|expired-deal|search)([/]{0,1})$ $2.php

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)([/]{0,1})$ $1.php 

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)-dl-([0-9]+)/$  /$1/$2-dl-$3 [R=301,L]

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)-dl-([0-9]+)$ deal.php?deal=$3
Redirect 301 /my-wallet /purchase-history
RewriteRule ^purchase-history my-wallet.php
RewriteRule ^([a-zA-Z0-9_-]+)/deal/([0-9]+)([/]{0,1})$ deal.php?deal=$2
RewriteRule ^my-account/([a-zA-Z0-9_-]+)([/]{0,1})$ my-account.php?s=$1
RewriteRule ^affiliate-account/([a-zA-Z0-9_-]+)([/]{0,1})$ affiliate-account.php?s=$1
RewriteRule ^affiliate-history/([a-zA-Z0-9_-]+)([/]{0,1})$ affiliate-history.php
RewriteRule ^([a-zA-Z0-9_-]+)/more-cities/([a-zA-Z0-9_-]+)([/]{0,1})$ more-cities.php?s=$2
RewriteRule ^([a-zA-Z0-9_-]+)/deal-list/([a-zA-Z0-9_-]+)([/]{0,1})$ deal-list.php?s=$2
RewriteRule ^news-detail/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ news-detail.php?id=$1
RewriteRule ^blog-details/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ blog-details.php?id=$1
RewriteRule ^advertisement-details/([0-9]+)([/]{0,1})$ advertisement-details.php?aid=$1
RewriteRule ^blog-listing/([0-9]+)/([0-9]+)/([0-9]+)([/]{0,1})$ blog-listing.php?cat_id=$1&y=$2&m=$3
RewriteRule ^([a-zA-Z0-9_-]+)/deal/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ deal.php?deal=$2
RewriteRule ^merchant-sign-up/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ merchant-sign-up.php?rep=$1
RewriteRule ^([a-zA-Z0-9_-]+)/deal-detail/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ deal-detail.php?deal=$2
RewriteRule ^verify-user/(.*)/(.*)/(.*) verify-user.php?code=$1&mail=$2&redirect=$3
RewriteRule ^success/(.*) success.php?dp_id=$1
RewriteRule ^buy-deal/(.*) buy-deal.php?show=$1
RewriteRule ^press-detail/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ press-detail.php?id=$1
RewriteRule ^things-detail/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ things-detail.php?id=$1
RewriteRule ^jobs-detail/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ jobs-detail.php?id=$1

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)-cat-([0-9]+)/$ /$1/$2-cat-$3 [R=301,L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)-cat-([0-9]+)-([a-zA-Z0-9_-]+)$  category-deal.php?cat=$3&type=$4
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)-productcat-([0-9]+)$  products-featured.php?productcat=$3
#RewriteRule ^([a-zA-Z0-9_-]+)/category-deal/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$  category-deal.php?cat=$2

RewriteRule ^([a-zA-Z0-9_-]+)/search/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$  search.php?cat=$2

RewriteRule ^merchant/([a-zA-Z0-9_-]+)-([0-9]+)-([0-9]+)$ merchant-favorite.php?company=$2&page=$3

RewriteRule ^merchant-favorite/([0-9]+)/([0-9]+)$ merchant-favorite.php?company=$1&page=$2
RewriteRule ^my-favorites-deals/([0-9]+)$ my-favorites-deals.php?page=$1
RewriteRule ^dealrss/([0-9]+)/([a-zA-Z0-9_-]+)([/]{0,1})$ deal-rss.php?city=$1&deal=$2
RewriteRule ^cms/(.*)/(.*) cms-page.php?id=$2
RewriteRule ^list-categories/(.*) list-categories.php?subcat=$1
RewriteRule ^([a-zA-Z0-9_-]+)/company-deals/(.*)/(.*) company-deals.php?status=$2&page=$3
RewriteRule ^([a-zA-Z0-9_-]+)/deals-images/(.*)/(.*)/(.*) deals-images.php?deal_id=$2&page=$3&add=$4
RewriteRule ^faq-detail/(.*)/(.*)-(.*)-(.*) faq-detail.php?cat=$3&ques=$4
RewriteRule ^all-deals/(.*) all-deals.php?s=$1

<IfModule mod_deflate.c>
	# Compress HTML, CSS, JavaScript, Text, XML and fonts
	AddOutputFilterByType DEFLATE application/javascript
	AddOutputFilterByType DEFLATE text/javascript
	AddOutputFilterByType DEFLATE application/rss+xml
	AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
	AddOutputFilterByType DEFLATE application/x-font
	AddOutputFilterByType DEFLATE application/x-font-opentype
	AddOutputFilterByType DEFLATE application/x-font-otf
	AddOutputFilterByType DEFLATE application/x-font-truetype
	AddOutputFilterByType DEFLATE application/x-font-ttf
	AddOutputFilterByType DEFLATE application/x-javascript
	AddOutputFilterByType DEFLATE application/xhtml+xml
	AddOutputFilterByType DEFLATE application/xml
	AddOutputFilterByType DEFLATE font/opentype
	AddOutputFilterByType DEFLATE font/otf
	AddOutputFilterByType DEFLATE font/ttf
	AddOutputFilterByType DEFLATE image/svg+xml
	AddOutputFilterByType DEFLATE image/x-icon
	AddOutputFilterByType DEFLATE image/png
	AddOutputFilterByType DEFLATE image/jpeg
	AddOutputFilterByType DEFLATE text/css
	AddOutputFilterByType DEFLATE text/html
	AddOutputFilterByType DEFLATE text/javascript
	AddOutputFilterByType DEFLATE text/plain
	AddOutputFilterByType DEFLATE text/xml
</IfModule>
<ifModule mod_expires.c>
	ExpiresActive On
	ExpiresDefault "access plus 3 seconds"
	ExpiresByType image/x-icon "access plus 172800 seconds"
	ExpiresByType image/png "access plus 7200 seconds"
	ExpiresByType image/jpeg "access plus 7200 seconds"
	ExpiresByType image/jpg "access plus 1 month"
	ExpiresByType application/javascript "access plus 1 month"
	ExpiresByType text/javascript "access plus 1 month"
	ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
	ExpiresByType application/x-font-ttf "access plus 1 year"
	ExpiresByType application/x-font-opentype "access plus 1 year"
	ExpiresByType application/x-font-woff "access plus 1 year"
	<IfModule mod_headers.c>
		Header append Cache-Control "public"
		Header set Connection keep-alive
	</IfModule>
</ifModule>
<FilesMatch "paypal-ipn\.php">
	Satisfy Any
	Allow from all
</FilesMatch>
<FilesMatch "deal-image-crop\.php">
	Satisfy Any
	Allow from all
</FilesMatch>
<FilesMatch "deal-image\.php">
	Satisfy Any
	Allow from all
</FilesMatch>

RewriteCond %{REQUEST_URI} ^(user-uploads/uploads|user-uploads/background-images|user-uploads/category-images|user-uploads/charity-images|user-uploads/company-logo|user-uploads/deal-images|user-uploads/logo|user-uploads/navigation-bullets|user-uploads/news-images|user-uploads/things-images|user-uploads/upload-faq-image-gallery|user-uploads/upload-image-gallery|user-uploads/user-images|user-uploads/digital-uploads|user-uploads/banner-images|user-uploads/blog-images) [NC]
RewriteCond %{REQUEST_URI} !\.(jpe?g|png|gif)$ [NC]
RewriteRule .* - [F,L]

RewriteCond %{REQUEST_URI} ^(temp-xls) [NC]
RewriteCond %{REQUEST_URI} !\.(xl|xls?x|csv|txt)$ [NC]
RewriteRule .* - [F,L]

RewriteCond %{REQUEST_URI} ^(db-backup) [NC]
RewriteCond %{REQUEST_URI} !\.(sql?gz|txt)$ [NC]
RewriteRule .* - [F,L]
 
 